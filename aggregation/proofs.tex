\section{Mathematical Relations}

\subsection{Final Demand Augmentation}

This is a proof of Equation~2 in the manuscript.  

Given a life cycle inventory database (LCIDB) containing input-output matrix $A$ and emission matrix $B$, and a final demand vector $\mathbf{y}$, construct an augmented inventory database
$\tilde{A} = \left[\begin{smallmatrix} 0 & \mathbf{0} \\ \mathbf{y} & A \end{smallmatrix}\right]$,
$\tilde{B} = [ \mathbf{0},\, B ]$, and canonical functional unit $\tilde{\mathbf{y}} =  [ 1,\, 0,\, 0 ,\,\ldots,\, 0]^{T}$.  Show that
\begin{equation} B\times\left(I-A\right)^{-1}\times\mathbf{y} = \tilde{B}\times\left(I-\tilde{A}\right)^{-1}\times\tilde{\mathbf{y}}
\end{equation}

We begin by constructing $(I-\tilde{A})^{-1}$.  Because the matrix is block triangular, we only need to determine the value of $\mathbf{q}$ in the matrix below:
\begin{eqnarray}
  I &=&  (I-\tilde{A})^{-1}\times(I-\tilde{A})\\
  \left[\begin{array}{cc} 1 & \mathbf{0} \\
    \mathbf{0} & I
  \end{array}\right] &=&
  \left[\begin{array}{cc} 1 & \mathbf{0} \\
      \mathbf{q} & (I-A)^{-1}
  \end{array}\right]\times
  \left[\begin{array}{cc} 1 & \mathbf{0} \\
      -\mathbf{y} & (I-A)
        \end{array}\right]
\end{eqnarray}
It can be seen that $\mathbf{q}-(I-A)^{-1}\times\mathbf{y}=0$ is a necessary condition to satisfy the equality, and thus $\mathbf{q}=(I-A)^{-1}\times\mathbf{y}$.

We know that $\tilde{\mathbf{y}}$ selects the first column of its argument, so:
\begin{equation}
  (I-\tilde{A})^{-1}\times\tilde{\mathbf{y}} = \left[\begin{array}{c}
      1\\
      \mathbf{q}
    \end{array}\right]
\end{equation}

And therefore

\begin{eqnarray}
  \tilde{B}\times(I-\tilde{A})^{-1}\times\tilde{\mathbf{y}} &=& \left[\begin{array}{cc}\mathbf{0}&B\end{array}\right]\times\left[\begin{array}{c}
      1\\
      \mathbf{q}
    \end{array}\right]\\
   &=&B\times\mathbf{q}\\
   &=&B\times(I-A)^{-1}\times\mathbf{y}
\end{eqnarray}
thus completing the proof.

\subsection{``Flattening'' the background database}

Given a canonical LCA foreground study, show that the following formulations are equivalent:
\begin{eqnarray}
\tilde{A} = \left[\begin{array}{cc}
A_f & 0 \\
A_d &  A
  \end{array}
\right];&
  \tilde{B} = \left[\begin{array}{cc} B_f & B   \end{array}\right] \\
 \tilde{A}_{flat} = \left[\begin{array}{cc} 
A_f &  0 \\
A_d & 0 
   \end{array}\right];&  \tilde{B}_{flat} = \left[\begin{array}{cc} B_f & B_x \end{array}\right ]
\end{eqnarray}
where $B_x = B\times(I-A)^{-1}$.

It is sufficient to show that $\tilde{B}\times(I-\tilde{A})^{-1} = \tilde{B}_{flat}\times(I-\tilde{A}_{flat})^{-1}$.

Using the shorthand $Z=I-A$, we define the following identity:
\begin{equation}
  I* = \left[\begin{array}{cc}
      I & 0 \\
      0 & Z
    \end{array}\right]^{-1} \times
  \left[\begin{array}{cc}
      I & 0 \\
      0 & Z
    \end{array}\right]
\end{equation}

We introduce the identity in between the two terms of the LCIDB:
\begin{align}
  \tilde{B}\times(I-\tilde{A})^{-1} &=
  \left[\begin{array}{cc}B_f & B\end{array}\right]\times I*  \times
  \left[\begin{array}{cc}I-A_f & 0 \\ -A_d & I-A\end{array}\right]^{-1}\\
      &=  \left[\begin{array}{cc}B_f & B\end{array}\right]\times 
      \left[\begin{array}{cc}I & 0 \\ 0 & Z\end{array}\right]^{-1}\times
      \left[\begin{array}{cc}I & 0 \\ 0 & Z\end{array}\right] \times
      \left[\begin{array}{cc}I-A_f & 0 \\ -A_d & Z\end{array}\right]^{-1}
\end{align}
Using the associative property of matrix multiplication, it can be shown that $M\times N^{-1} = (N\times M^{-1})^{-1}$ for any invertible $M$ and $N$ of the same rank, so:
\begin{eqnarray}
  \tilde{B}\times(I-\tilde{A})^{-1}
  &=& \left[\begin{array}{cc}B_f & B\end{array}\right]\times 
      \left[\begin{array}{cc}I & 0 \\ 0 & Z\end{array}\right]^{-1}\times
\left(
\left[\begin{array}{cc}I-A_f & 0 \\ -A_d & Z\end{array}\right]\times
    \left[\begin{array}{cc}I & 0 \\ 0 & Z\end{array}\right]^{-1}\right)^{-1}\\
  &=&   \left[\begin{array}{cc}B_f & B\end{array}\right]\times 
      \left[\begin{array}{cc}I & 0 \\ 0 & Z^{-1}\end{array}\right]\times
\left(
\left[\begin{array}{cc}I-A_f & 0 \\ -A_d & Z\end{array}\right]\times
\left[\begin{array}{cc}I & 0 \\ 0 & Z^{-1}\end{array}\right]\right)^{-1}\\
 &=& \left[\begin{array}{cc}B_f & B\times Z^{-1}\end{array}\right]\times
\left(\left[\begin{array}{cc}I-A_f & 0 \\ -A_d & I\end{array}\right]\right)^{-1}
\end{eqnarray}
But these terms are equivalent to the flattened LCIDB:
\begin{eqnarray}
  \tilde{B}\times(I-\tilde{A})^{-1} &=&
  \left[\begin{array}{cc}B_f & B\times Z^{-1}\end{array}\right]\times
\left(\left[\begin{array}{cc}I-A_f & 0 \\ -A_d & I\end{array}\right]\right)^{-1} \\
&=& \left[\begin{array}{cc}B_f & B\times (I-A)^{-1}\end{array}\right]\times
\left(I-\left[\begin{array}{cc}A_f & 0 \\ A_d & 0\end{array}\right]\right)^{-1}\\
&=& \tilde{B}_{flat}\times(I-\tilde{A}_{flat})^{-1}
\end{eqnarray}
thus completing the proof.
