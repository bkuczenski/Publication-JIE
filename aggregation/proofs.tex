\section{Mathematical Relations}

\subsection{Final Demand Augmentation}

This is a proof of Equation~2 in the manuscript.  

Given a life cycle inventory database (LCIDB) containing input-output matrix $A$ and emission matrix $B$, and a final demand vector $\mathbf{y}$, construct an augmented inventory database
$\tilde{A} = \left[\begin{smallmatrix} 0 & \mathbf{0} \\ \mathbf{y} & A \end{smallmatrix}\right]$,
$\tilde{B} = [ \mathbf{0},\, B ]$, and canonical functional unit $\tilde{\mathbf{y}} =  [ 1,\, 0,\, 0 ,\,\ldots,\, 0]^{T}$.  Show that
\begin{equation} B\times\left(I-A\right)^{-1}\times\mathbf{y} = \tilde{B}\times\left(I-\tilde{A}\right)^{-1}\times\tilde{\mathbf{y}}
\end{equation}

We begin by constructing $(I-\tilde{A})^{-1}$.  Because the matrix is block triangular, we only need to determine the value of $\mathbf{q}$ in the matrix below:
\begin{eqnarray}
  I &=&  (I-\tilde{A})^{-1}\times(I-\tilde{A})\\
  \left[\begin{array}{cc} 1 & \mathbf{0} \\
    \mathbf{0} & I
  \end{array}\right] &=&
  \left[\begin{array}{cc} 1 & \mathbf{0} \\
      \mathbf{q} & (I-A)^{-1}
  \end{array}\right]\times
  \left[\begin{array}{cc} 1 & \mathbf{0} \\
      -\mathbf{y} & (I-A)
        \end{array}\right]
\end{eqnarray}
It can be seen that $\mathbf{q}-(I-A)^{-1}\times\mathbf{y}=0$ is a necessary condition to satisfy the equality, and thus $\mathbf{q}=(I-A)^{-1}\times\mathbf{y}$.

We know that $\tilde{\mathbf{y}}$ selects the first column of its argument, so:
\begin{equation}
  (I-\tilde{A})^{-1}\times\tilde{\mathbf{y}} = \left[\begin{array}{c}
      1\\
      \mathbf{q}
    \end{array}\right]
\end{equation}

And therefore

\begin{eqnarray}
  \tilde{B}\times(I-\tilde{A})^{-1}\times\tilde{\mathbf{y}} &=& \left[\begin{array}{cc}\mathbf{0}&B\end{array}\right]\times\left[\begin{array}{c}
      1\\
      \mathbf{q}
    \end{array}\right]\\
   &=&B\times\mathbf{q}\\
   &=&B\times(I-A)^{-1}\times\mathbf{y}
\end{eqnarray}
thus completing the proof.

\subsection{The Study Foreground Equation}

This section contains the derivation of Equation~\ref{eqn:study} in the manuscript, in two steps.

\input{proof-flattening}

\subsubsection{Separating Background from Foreground}
  
Equation~\ref{eqn:study} in the manuscript is derived from Equation~\ref{eqn:si-flat} above.  It was also derived in Kuczenski (2015).

We begin by computing $(I-\tilde{A}_{flat})^{-1}$, again taking advantage of the matrix's block triangularity.  Find $Q$ such that:
\begin{equation}
  \left[\begin{array}{cc} (I-A_f) & 0 \\ -A_d & I\end{array}\right]\times
  \left[\begin{array}{cc} (I-A_f)^{-1} & 0 \\ Q & I\end{array}\right] =
  \left[\begin{array}{cc} I & 0 \\ 0 & I\end{array}\right]
\end{equation}

It can be seen that $Q=A_d\times(I-A_f)^{-1}$ is a necessary condition to satisfy the equality, and thus:
\begin{equation}
  (I-\tilde{A})^{-1} = \left[\begin{array}{cc} (I-A_f)^{-1} & 0 \\ A_d\times(I-A_f)^{-1} & I\end{array}\right]
\end{equation}.

Substituting this into the LCA system equation:
\begin{align}
  s =\;& \mathbf{c}^T\times \tilde{B}_{flat}\times(I-\tilde{A}_{flat})^{-1}\tilde{\mathbf{y}}\\
  =\;& \mathbf{c}^T\times \left[\begin{array}{cc} B_f & B_x \end{array}\right]\times
  \left[\begin{array}{cc} (I-A_f)^{-1} & 0 \\ A_d\times(I-A_f)^{-1} & I \end{array}\right]
  \times\left[\begin{array}{c} \tilde{\mathbf{y}}_f \\ \mathbf{0}\end{array}\right]
\end{align}
where $\tilde{\mathbf{y}}_f$ is a canonical functional unit having the same dimension as $A_f$.  Thus:
\begin{align}
s =\;& \mathbf{c}^T\times \left[\begin{array}{cc} B_f & B_x \end{array}\right]\times
 \left[\begin{array}{c} (I-A_f)^{-1}\times\tilde{\mathbf{y}}_f \\ A_d\times(I-A_f)^{-1}\times\tilde{\mathbf{y}}_f\end{array}\right]\\
 =\;& \mathbf{c}^T\times \left(B_f\times(I-A_f)^{-1}\times\tilde{\mathbf{y}}_f
 + B_x\times A_d\times(I-A_f)^{-1}\times\tilde{\mathbf{y}}_f\right)\\
 =\;& \mathbf{c}^T\times \left(B_f + B_x\times A_d\right)\times(I-A_f)^{-1}\times \tilde{\mathbf{y}}_f\\
 =\;& \mathbf{c}^T\times \left(B_f + B_x\times A_d\right)\times \tilde{\mathbf{x}}
\end{align}
thus completing the derivation.
