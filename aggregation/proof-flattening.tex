\subsubsection{``Flattening'' the background database}

First, information about the background database is removed from $\tilde{A}$ and replaced by an aggregated LCI database in a process I call ``flattening.''

Given a canonical LCA foreground study, show that the following formulations are equivalent:
\begin{eqnarray}
\tilde{A} = \left[\begin{array}{cc}
A_f & 0 \\
A_d &  A
  \end{array}
\right];&
  \tilde{B} = \left[\begin{array}{cc} B_f & B   \end{array}\right] \\
 \tilde{A}_{flat} = \left[\begin{array}{cc} 
A_f &  0 \\
A_d & 0 
   \end{array}\right];&  \tilde{B}_{flat} = \left[\begin{array}{cc} B_f & B_x \end{array}\right ]
\end{eqnarray}
where $B_x = B\times(I-A)^{-1}$.

It is sufficient to show that $\tilde{B}\times(I-\tilde{A})^{-1} = \tilde{B}_{flat}\times(I-\tilde{A}_{flat})^{-1}$.

Using the shorthand $Z=I-A$, we define the following identity:
\begin{equation}
  I* = \left[\begin{array}{cc}
      I & 0 \\
      0 & Z
    \end{array}\right]^{-1} \times
  \left[\begin{array}{cc}
      I & 0 \\
      0 & Z
    \end{array}\right]
\end{equation}

We introduce the identity in between the two terms of the LCIDB:
\begin{align}
  \tilde{B}\times(I-\tilde{A})^{-1} &=
  \left[\begin{array}{cc}B_f & B\end{array}\right]\times I*  \times
  \left[\begin{array}{cc}I-A_f & 0 \\ -A_d & I-A\end{array}\right]^{-1}\\
      &=  \left[\begin{array}{cc}B_f & B\end{array}\right]\times 
      \left[\begin{array}{cc}I & 0 \\ 0 & Z\end{array}\right]^{-1}\times
      \left[\begin{array}{cc}I & 0 \\ 0 & Z\end{array}\right] \times
      \left[\begin{array}{cc}I-A_f & 0 \\ -A_d & Z\end{array}\right]^{-1}
\end{align}
Using the associative property of matrix multiplication, it can be shown that $M\times N^{-1} = (N\times M^{-1})^{-1}$ for any invertible $M$ and $N$ of the same rank, so:
\begin{eqnarray}
  \tilde{B}\times(I-\tilde{A})^{-1}
  &=& \left[\begin{array}{cc}B_f & B\end{array}\right]\times 
      \left[\begin{array}{cc}I & 0 \\ 0 & Z\end{array}\right]^{-1}\times
\left(
\left[\begin{array}{cc}I-A_f & 0 \\ -A_d & Z\end{array}\right]\times
    \left[\begin{array}{cc}I & 0 \\ 0 & Z\end{array}\right]^{-1}\right)^{-1}\\
  &=&   \left[\begin{array}{cc}B_f & B\end{array}\right]\times 
      \left[\begin{array}{cc}I & 0 \\ 0 & Z^{-1}\end{array}\right]\times
\left(
\left[\begin{array}{cc}I-A_f & 0 \\ -A_d & Z\end{array}\right]\times
\left[\begin{array}{cc}I & 0 \\ 0 & Z^{-1}\end{array}\right]\right)^{-1}\\
 &=& \left[\begin{array}{cc}B_f & B\times Z^{-1}\end{array}\right]\times
\left(\left[\begin{array}{cc}I-A_f & 0 \\ -A_d & I\end{array}\right]\right)^{-1}
\end{eqnarray}
But these terms are equivalent to the flattened LCIDB:
\begin{eqnarray}
  \tilde{B}\times(I-\tilde{A})^{-1} &=&
  \left[\begin{array}{cc}B_f & B\times (I-A)^{-1}\end{array}\right]\times
\left(\left[\begin{array}{cc}I-A_f & 0 \\ -A_d & I\end{array}\right]\right)^{-1} \\
&=& \left[\begin{array}{cc}B_f & B_x\end{array}\right]\times
\left(I-\left[\begin{array}{cc}A_f & 0 \\ A_d & 0\end{array}\right]\right)^{-1}\\
&=& \tilde{B}_{flat}\times(I-\tilde{A}_{flat})^{-1}\label{eqn:si-flat}
\end{eqnarray}
thus completing the proof.
